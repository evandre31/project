{% extends 'base.html' %}
{% load static %}
{% block title %}reset password{% endblock title %}

{% block content %}
    <h2>reset password</h2> {{ msg }}
    <form id="id_form_register" method="post" data-validate-email-url="{% url 'accounts:validate_email_register' %}">
        {% csrf_token %}
        {% include 'accounts/snippets/field.html' with field=form.email f_onfocusout="validateEmailReset()" f_onkeyup="validateEmailReset()"%}<!--field email -->
        <button type="submit" class="btn btn-danger">request password reset</button>
    </form>
{% endblock %}

{% block javascript %}
    {#  check email #}
    <script src="{% static 'accounts/js/register.js' %}"></script>
    <script>
/*
        $('#id_email').on('keyup input',function CheckEmailReset() {
            const email = $(this).val();
            const email_Ele = document.getElementById('id_email');
            const message_email = document.createElement("span");
            message_email.id = 'id_message_email';
            message_email.classList.add('classe_message_email');
            message_email.style = "display: none";
            email_Ele.parentNode.appendChild(message_email);
            const form = $(this).closest("form");
            $.ajax({
                url: form.attr("data-validate-email-url"),
                data: form.serialize(),
                dataType: 'json',
                success: function (data) {
                    if (data.email_exist) {
                        $('#id_message_email').text(data.error_message);
                        $("#id_message_email").css("display", "block");
                    } else {
                        $('#id_message_email').text(data.error_message);
                        $("#id_message_email").css("display", "block");
                    }
                }
            });
        })
        ;
*/
    </script> {#  end check email #}
{% endblock javascript %}